# CausalQwen 数学实现全面测试指南

本文档提供一个全新的、更加严格的测试框架，专门用于验证 CausalQwen 中每个数学组件的正确实现。

## 🎯 核心测试原则

1. **数学精确性优先**：每个测试必须直接对应数学公式
2. **隔离测试**：每个组件独立测试，避免级联错误
3. **边界条件全覆盖**：特别关注零值、极值、特殊情况
4. **数值稳定性验证**：检查浮点运算的精度和稳定性
5. **维度一致性检查**：确保张量形状在整个流程中保持正确

## 📋 测试清单概览

### 第一部分：基础组件测试
- [ ] 数值编码函数 φ(v) 的完整验证
- [ ] 增强嵌入计算的精确性测试
- [ ] 词汇表扩展的正确性验证

### 第二部分：分布计算测试
- [ ] 柯西分布参数的有效性验证
- [ ] 线性变换的数学精确性测试
- [ ] CDF 计算的数值准确性

### 第三部分：网络组件测试
- [ ] 归因网络的初始化验证
- [ ] 行动网络的权重迁移测试
- [ ] OvR 阈值的影响分析

### 第四部分：损失函数测试
- [ ] 柯西负对数似然的精确计算
- [ ] 门控机制的边界情况
- [ ] 梯度流的正确性验证

### 第五部分：端到端集成测试
- [ ] 完整前向传播的数值验证
- [ ] 采样模式的一致性测试
- [ ] 批处理的正确性验证

### 第六部分：实验流程验证
- [ ] `basic` 实验完整执行
- [ ] 训练、评估、报告流程健全性

### 第七部分：模块化流程图验证
- [x] 数值感知嵌入 (对应图2)
- [ ] 因果核心流程 (对应图3)
